<!DOCTYPE html>
<html lang="zh-Hant-TW">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
  <title data-i18n="title">é£¯åº—æœå‹™-å…è²»æ¥é§è»Šé ç´„</title>
  <link rel="icon" type="image/png" href="images/logo2.png" />
  <style>
    :root{
      --primary:#A98570;
      --secondary:#8f7147;
      --bg:#f5f5f5;
      --card:#fff;
      --text:#333;
      --muted:#777;
      --disabled:#c7c7c7;
      --radius:14px;
      --shadow:0 2px 8px rgba(0,0,0,.08);
      --shadow-lg:0 10px 30px rgba(0,0,0,.15);
      --green:#2e7d32;
      --red:#b00020;
      --gray:#9e9e9e;
    }

    *{box-sizing:border-box}
    html, body { height:100%; }
    html, body {
      margin:0;
      background:var(--bg);
      color:var(--text);
      font-family:system-ui,-apple-system,"PingFang TC","Microsoft JhengHei",Segoe UI,Roboto,Arial,sans-serif;
      min-height:100vh;
      -webkit-text-size-adjust:100%;
    }

    /* åªè®“ body åš flex æ’ç‰ˆï¼Œä¸é ç•™è·‘é¦¬ç‡ˆé«˜åº¦ï¼ˆè·‘é¦¬ç‡ˆæ˜¯ fixedï¼Œä¸éœ€è¦ paddingï¼‰ */
    body {
      display:flex;
      flex-direction:column;
      padding-top:0;
    }

    /* è·‘é¦¬ç‡ˆ */
    .marquee-container {
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      z-index: 60;
      /* ä¸»é¡Œè‰² #A98570ï¼Œ20% é€æ˜ */
      background: rgba(169, 133, 112, 1);
      color: #fff;
      display: flex;              /* è®“æ–‡å­—å’Œ X åŒä¸€è¡Œ */
      align-items: center;
      padding: 0 48px 0 18px;     /* å³é‚Šç•™ç©ºçµ¦é—œé–‰æŒ‰éˆ• */
      height: 24px;               /* é«˜ä¸€é» */
      font-size: 18px;            /* å­—å¤§ä¸€é» */
      line-height: 24px;
      overflow: hidden;
    }
    
    /* åœé ç«™é»åœ–ç‰‡å›ºå®šåœ¨å¡ç‰‡å¯¬åº¦å…§ */
    .station-img,
    .station-info-img {
      width: 100%;
      height: auto;
      display: block;
      border-radius: 12px;
      box-shadow: var(--shadow);
    }

    /* é—œé–‰æŒ‰éˆ•ï¼ˆå³ä¸Šè§’çš„ âœ•ï¼‰ */
    .marquee-close {
      position: absolute;
      right: 8px;
      top: 50%;
      transform: translateY(-50%);
      background: none;
      border: none;
      color: #fff;
      font-size: 18px;
      cursor: pointer;
      width: 28px;
      height: 28px;
      display: flex;
      align-items: center;
      justify-content: center;
      z-index: 10;
    }

    /* è·‘é¦¬æ–‡å­—æœ¬é«” */
    .marquee-content {
      white-space: nowrap;
      display: inline-block;
      padding-left: 100%; /* å¾å®¹å™¨å³å´é–‹å§‹æ»¾å‹• */
      animation: marquee 30s linear infinite;
      font-size: 18px;
      font-weight: 500;
    }

    @keyframes marquee {
      0% {
        transform: translateX(0);
      }
      100% {
        transform: translateX(-100%);
      }
    }
    /* æ‡¸åœæ™‚æš«åœå‹•ç•« */
    .marquee-container:hover .marquee-content {
      animation-play-state: paused;
    }
    /* åœ–ç‰‡å±•ç¤ºå€ */

    .image-gallery {
      display: flex;
      flex-direction: column;   /* å‚ç›´æ’åˆ— */
      gap: 16px;
      margin-top: 20px;
    }

    .gallery-image {
      width: 100%;
      height: auto;             /* ä¸è£åˆ‡åœ–ç‰‡æ¯”ä¾‹ */
      border-radius: 12px;      /* âœ… è·ŸåŸæœ¬ä¸€æ¨£å°åœ“è§’ */
      box-shadow: var(--shadow);/* âœ… ä¿ç•™åŸæœ¬çš„é™°å½±æ•ˆæœ */
      display: block;           /* ä¿éšªä¸€é»ï¼Œé¿å…æœ‰å¥‡æ€ªç©ºéš™ */
    }



    .navbar{
      position:sticky;top:0;z-index:50;
      top:0;                  /* é è¨­è²¼åˆ°æœ€ä¸Šæ–¹ï¼Œæ²’æœ‰è·‘é¦¬ç‡ˆæ™‚ä¸é ç•™ç©ºé–“ */
      display:flex;align-items:center;
      padding:12px 16px;background:var(--card);box-shadow:0 1px 4px rgba(0,0,0,.06)
    }
    /* åªæœ‰ç•¶ body æœ‰ has-marquee é¡åˆ¥æ™‚ï¼Œnavbar æ‰å¾€ä¸‹ç§» */
    body.has-marquee .navbar {
      top: 24px;              /* æœ‰è·‘é¦¬ç‡ˆæ™‚ï¼Œnavbar åœ¨è·‘é¦¬ç‡ˆä¸‹é¢ */
    }
    .brand{display:flex;align-items:center;gap:10px;margin-right: 30px;}
    .brand img{height:28px;width:auto;border-radius:6px;box-shadow:0 1px 3px rgba(0,0,0,.08)}
    .brand-title{font-weight:800;font-size:18px; cursor: pointer;}
    .brand-title:hover{color:var(--primary);}

    .nav-right{display:flex;align-items:center;gap:12px;margin-left:auto}
    .lang-wrap span { font-size: 12px; }
    .nav-links{display:flex;gap:8px}
    .nav-links button{
      background:none;border:none;padding:8px 10px;border-radius:10px;cursor:pointer;
      font-size:14px
    }
    .nav-links button.active,.nav-links button:hover{color:var(--primary);background:#f3eee6}

    select{
      appearance:none;padding:8px 28px 8px 10px;border:1px solid #ddd;border-radius:10px;background:white url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="14" height="10" viewBox="0 0 24 24" fill="none" stroke="%23666" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="6 9 12 15 18 9"/></svg>') no-repeat right 8px center/14px
    }

    .page{display:none;padding:20px;max-width:980px;margin:0 auto;flex:1}
    .page.active{display:block}

    /* å³æ™‚ä½ç½® - é ç•™å®¹å™¨æ¨£å¼ */
    .realtime-box {
      margin-top: 8px;
      min-height: 320px;  /* å…ˆçµ¦ä¿ç•™é«˜åº¦ï¼ŒæœªåµŒå…¥å‰ä¹Ÿä¸çªå…€ */
      border-radius: 12px;
      background: #fafafa;
      box-shadow: var(--shadow);
      overflow: hidden;
    }

    /* â˜… çµ±ä¸€é›»è…¦ç‰ˆé ç´„æµç¨‹å¡ç‰‡å¯¬åº¦ï¼ˆ33vwï¼Œå›ºå®šï¼‰ */
    .wizard-fixed{ width:100%; }
    @media (min-width: 1024px){
      .wizard-fixed{ width:66vw; min-width:620px; max-width:920px; margin-left:auto; margin-right:auto; }
    }

    .hero{
      max-width:840px;margin:18px auto 16px;background:var(--card);border-radius:16px;box-shadow:var(--shadow);padding:24px 20px;text-align:center
    }
    .hero h1{margin:0 0 12px;font-size:30px;font-weight:900}
    .hero p{margin:0;color:var(--muted)}

    .button{
      display:inline-block;min-width:160px;
      border:none;border-radius:14px;padding:14px 18px;font-size:16px;font-weight:700;cursor:pointer;background:var(--primary);color:#fff;
      transition:transform .06s ease,filter .2s ease
    }
    @media (max-width: 768px) {
      .button { 
        min-width: 144px; /* ç¸®å°10% */
        padding: 12.6px 16.2px; /* ç¸®å°10% */
        font-size: 14.4px; /* ç¸®å°10% */
        border-radius: 12.6px; /* ç¸®å°10% */
      }
    }
    .button:disabled{ opacity:.6; cursor:not-allowed; }
    .button:active{transform:translateY(1px)}
    .btn-ghost{background:#eee;color:#333}

    .grid{display:grid;gap:14px}
    .card{ background:var(--card);border-radius:16px;box-shadow:var(--shadow);padding:18px }
    .card h2{margin:0 0 12px;font-size:20px;font-weight:800;text-align:center}
    .station-page .card h2 { text-align: left; }

    .field{margin:8px 0}
    .label{display:block;margin-bottom:6px;font-weight:700}
    .hint{font-size:12px;color:var(--muted)}

    .input,.select,.readonly{ width:100%;padding:12px 14px;border:1px solid #ddd;border-radius:12px;background:#fff;font-size:16px }
    .readonly{background:#f4f4f4;color:#666}

    .error{color:#b00020;font-size:13px;margin-top:6px;display:none}

    .options{display:flex;flex-direction:column;gap:10px}
    .opt-btn{
      text-align:left;padding:14px 16px;border:1px solid #e7e7e7;border-radius:12px;background:#fff;font-weight:800;color:var(--primary);cursor:pointer;
      font-size:18px;
    }
    @media (max-width: 768px) {
      .opt-btn {
        padding: 12.6px 14.4px; /* ç¸®å°10% */
        font-size: 16.2px; /* ç¸®å°10% */
        border-radius: 10.8px; /* ç¸®å°10% */
      }
    }
    .opt-btn:hover{box-shadow:var(--shadow)}
    .opt-btn.active{outline:3px solid rgba(169,133,112,.25)}
    .opt-btn.disabled{color:#bbb;background:#f7f7f7;border-color:#eee;cursor:not-allowed}

    .actions{display:flex;flex-wrap:wrap;gap:10px;justify-content:center;margin-top:8px}
    .actions.row{flex-direction:row}
    .actions.col{flex-direction:column}

    /* è¦†è“‹å±¤ */
    .overlay{ position:fixed;inset:0;background:rgba(255,255,255,.94);display:none;align-items:center;justify-content:center;z-index:9999; pointer-events:none }
    .overlay.show{display:flex; pointer-events:auto}
    .spinner{width:48px;height:48px;border-radius:50%;border:4px solid #eee;border-top:4px solid var(--primary);animation:spin 1s linear infinite;margin:0 auto 10px}
    @keyframes spin{to{transform:rotate(360deg)}}
    .overlay-card{background:#fff;border-radius:16px;box-shadow:var(--shadow-lg);padding:22px;max-width:680px;text-align:left}
    .overlay-card h3{margin:0 0 8px;font-size:20px}

    /* å°è©±æ¡†ï¼ˆéŒ¯èª¤/ç¢ºèªï¼‰ */
    .dialog-content p{ margin:8px 0 0; color:#444; line-height:1.6; }
    .dialog-actions{ display:flex; gap:10px; justify-content:flex-end; margin-top:14px; }
    .dialog-actions .button{ min-width:120px; }

    @keyframes shake {0%,100%{transform:translateX(0)}10%,30%,50%,70%,90%{transform:translateX(-5px)}20%,40%,60%,80%{transform:translateX(5px)}}
    .shake{animation:shake .5s ease-in-out}

    .query-form{display:flex;flex-direction:column;gap:14px}

    .footer{ background:#f5f5f5;color:#666;text-align:center;padding:20px;margin-top:auto;border-top:1px solid #e0e0e0;width:100%; }

    /* æ‰‹æ©Ÿåº•éƒ¨å°è¦½ï¼ˆç™½å­—ï¼‰ */
    .mobile-tabbar{ position:fixed;left:0;right:0;bottom:0;display:none;z-index:40; background:var(--primary);border-top:1px solid #e9e9e9;box-shadow:0 -2px 12px rgba(0,0,0,.06) }
    .mobile-tabbar .bar{display:grid;grid-template-columns:repeat(4,1fr);gap:0}
    .mobile-tabbar button{ appearance:none;border:none;background:none;padding:12px 6px;font-size:18px;color:#fff;font-weight:700;opacity:.8 }
    .mobile-tabbar button.active{opacity:1;text-decoration:underline}

    /* å›åˆ°é ‚ç«¯æŒ‰éˆ• */
    #backToTop{
      position:fixed;right:18px;bottom:24px;z-index:10000;display:none;width:44px;height:44px;border:none;border-radius:50%;cursor:pointer;background:#0009;color:#fff;font-size:22px;line-height:44px;text-align:center;pointer-events:auto;touch-action:manipulation;-webkit-tap-highlight-color:transparent;box-shadow:0 2px 8px rgba(0,0,0,0.3)
    }
    #backToTop:hover{filter:brightness(1.2)}
    #backToTop:active{transform:scale(0.95);background:#000c}
    @media (max-width: 768px){ 
      #backToTop{ 
        bottom:96px;
        right:12px;
        width:40px;
        height:40px;
        font-size:20px;
        line-height:40px;
      } 
    }

    /* æˆåŠŸå‹•ç•«ï¼ˆ3ç§’ï¼‰ */
    .success-animation{position:fixed;top:50%;left:50%;transform:translate(-50%,-50%);z-index:10000;background:rgba(255,255,255,.95);border-radius:16px;padding:30px;box-shadow:var(--shadow-lg);display:none;align-items:center;justify-content:center;flex-direction:column;pointer-events:none}
    .success-animation.show{display:flex;animation:fadeInOut 3s ease-in-out;pointer-events:auto}
    .checkmark{width:80px;height:80px;border-radius:50%;display:block;stroke:#4CAF50;stroke-width:2;stroke-miterlimit:10;margin:20px auto;box-shadow:inset 0 0 0 0 #4CAF50;animation:fill .4s ease-in-out .4s forwards,scale .3s ease-in-out .9s both}
    .checkmark__circle{stroke-dasharray:166;stroke-dashoffset:166;stroke:#4CAF50;stroke-width:2;stroke-miterlimit:10;fill:none;animation:stroke .6s cubic-bezier(.65,0,.45,1) forwards}
    .checkmark__check{transform-origin:50% 50%;stroke-dasharray:48;stroke-dashoffset:48;stroke:#fff;stroke-width:3;stroke-linecap:round;stroke-linejoin:round;vector-effect:non-scaling-stroke;animation:stroke .3s cubic-bezier(.65,0,.45,1) .8s forwards}
    @keyframes stroke{100%{stroke-dashoffset:0}}
    @keyframes scale{0%,100%{transform:none}50%{transform:scale3d(1.1,1.1,1)}}
    @keyframes fill{100%{box-shadow:inset 0 0 0 40px #4CAF50}}
    @keyframes fadeInOut{0%{opacity:0}20%{opacity:1}80%{opacity:1}100%{opacity:0}}

    /* è»Šç¥¨å¡ç‰‡ */
    .ticket-card { position:relative; background: white; border-radius: 16px; box-shadow: var(--shadow-lg); padding: 20px; margin: 20px auto; max-width: 820px; width: 100%; }
    .ticket-card.expired{filter:grayscale(1);opacity:.7}
    .status-pill{position:absolute;left:12px;top:12px;border-radius:999px;padding:4px 10px;font-size:12px;font-weight:800;color:#fff}
    .status-booked{background:var(--green)}
    .status-cancelled{background:var(--red)}
    .status-rejected{background:#d2691e}
    .status-boarded{background:#1976d2}
    .status-expired{background:var(--gray)}

    .ticket-header { text-align: center; margin-bottom: 24px; border-bottom: 2px solid var(--primary); padding-bottom: 16px; }
    .ticket-header h2 { margin: 0; font-size: 22px; font-weight: 900; color: var(--primary); }

    .ticket-close{
      position:absolute;right:12px;top:12px;width:36px;height:36px;border-radius:50%;border:none;background:#00000022;color:#333;font-size:18px;cursor:pointer;line-height:36px;text-align:center
    }

    .ticket-content { display: grid; grid-template-columns: 1fr 1fr; gap: 20px; align-items: start; }
    .ticket-qr { text-align: center; padding: 20px; background: #f9f9f9; border-radius: 12px; min-height: 200px; }
    .ticket-qr img { width: 200px; height: 200px; border-radius: 8px; border: 1px solid #eee; background: #fff; object-fit: contain; }
    .ticket-info { display: flex; flex-direction: column; gap: 12px; }
    .ticket-field { display: flex; justify-content: space-between; align-items: center; padding: 12px 0; border-bottom: 1px solid #f0f0f0; }
    .ticket-field:last-child { border-bottom: none; }
    .ticket-label { font-weight: 800; color: var(--text); min-width: 120px; font-size: 18px; }
    .ticket-value { flex: 1; text-align: right; color: var(--muted); font-size: 18px; overflow-wrap: anywhere; word-break: break-word; }
    .ticket-actions { margin-top: 24px; display: flex; gap: 12px; justify-content: center; flex-direction: row-reverse; }

    .date-group{margin-bottom:20px;background:#fff;border-radius:14px;box-shadow:var(--shadow)}
    .date-header{display:flex;align-items:center;justify-content:space-between;padding:12px 14px;border-bottom:1px solid #eee;cursor:pointer}
    .date-title{font-weight:900}
    .date-count{color:#666;font-size:13px}
    .tickets-row{display:flex;gap:12px;padding:14px;overflow-x:auto;scroll-snap-type:x mandatory}
    .tickets-row .ticket-card{scroll-snap-align:start;flex:0 0 auto}

    .ticket-page .ticket-card{ max-width: 1000px; width:100%; }

    /* === æ‰‹æ©Ÿç‰ˆ === */
    @media (max-width: 768px) {
      .ticket-card { width: 95%; max-width: 95%; box-sizing: border-box; margin: 0 auto; padding: 14px; overflow: hidden; }
      .ticket-content { display: flex; flex-direction: column; align-items: center; gap: 12px; }
      .ticket-info { width: 100%; word-wrap: break-word; }
      .ticket-qr img { width: 160px; height: 160px; max-width: 100%; }
      .hero .actions { justify-content: center !important; }
      .footer { font-size: 70%; padding: 15px 10px; }
      .tickets-row{flex-direction:column;overflow-x:hidden}
      .ticket-card{width:100%;max-width:100%}

      /* æ‰‹æ©Ÿç‰ˆæ›´æ›logo */
      .brand img[src="/images/logo.png"] {
        content: url("/images/logo2.png");
      }
    }

    #step6 .field { margin: 4px 0; }
    #step6 .label, #step6 .readonly { line-height: 1.2; }

    /* === æ‰‹æ©Ÿç‰ˆä¿®æ­£ === */
    @media (max-width: 768px) {
      html, body { width: 100%; max-width: 100%; overflow-x: hidden; }
      .page, .card, .ticket-card { width: 100%; max-width: 100%; margin: 0 auto; box-sizing: border-box; }
      .nav-links { display: none; }
      .mobile-tabbar { display: block; }
      body { padding-bottom: 70px; }
      .navbar { justify-content: space-between; }
      .brand { margin-right: 0; }
      .actions { display: flex !important; flex-direction: row !important; justify-content: space-between !important; align-items: center !important; width: 100%; max-width: 340px; margin: 10px auto 0; gap: 10px; }
      .actions button { flex: 1; min-width: 120px; max-width: 160px; font-size: 15px; }
      @media (max-width: 768px) {
        .actions button { 
          min-width: 108px; /* ç¸®å°10% */
          max-width: 144px; /* ç¸®å°10% */
          font-size: 13.5px; /* ç¸®å°10% */
        }
      }
      .actions.has-three { flex-direction: column !important; align-items: center !important; justify-content: center !important; }
      .actions.has-three button { width: 80%; max-width: 320px; }
      .ticket-card { margin: 0 auto 20px; padding: 16px; overflow: visible; }
      .ticket-actions { display: flex; flex-wrap: wrap; justify-content: space-between; align-items: center; gap: 10px; width: 100%; margin-top: 16px; }
      .ticket-actions:not(.has-three) button { flex: 1; min-width: 140px; max-width: 160px; font-size: 15px; }
      @media (max-width: 768px) {
        .ticket-actions:not(.has-three) button { 
          min-width: 126px; /* ç¸®å°10% */
          max-width: 144px; /* ç¸®å°10% */
          font-size: 13.5px; /* ç¸®å°10% */
        }
      }
      .ticket-actions.has-three { flex-direction: column; align-items: center; }
      .ticket-actions.has-three button:nth-child(1),
      .ticket-actions.has-three button:nth-child(2) { width: 45%; max-width: 180px; }
      .ticket-actions.has-three button:nth-child(3) { width: 80%; max-width: 300px; }
    }

    .badge-alert{
      position:absolute; right:60px; top:12px;
      width:28px;height:28px;border-radius:50%;border:none;background:#ffcc80;color:#8a4b08;font-weight:900;cursor:pointer;
    }

    /* === æŸ¥è©¢ç­æ¬¡é é¢æ¨£å¼ === */
    .filter-controls { margin-bottom: 20px; }
    .filter-group { margin-bottom: 15px; }
    .filter-pills { display: flex; flex-wrap: wrap; gap: 8px; margin-top: 8px; }
    .filter-pill { padding: 8px 16px; border: 1px solid #ddd; border-radius: 20px; background: white; cursor: pointer; font-size: 14px; transition: all 0.2s; }
    .filter-pill.active { background: var(--primary); color: white; border-color: var(--primary); }
    .filter-pill:hover { box-shadow: var(--shadow); }
    .schedule-results { margin-top: 20px; }
    .schedule-card { background: white; border-radius: 12px; padding: 16px; margin-bottom: 12px; box-shadow: var(--shadow); border-left: 4px solid var(--primary); }
    .schedule-line { display: flex; justify-content: space-between; margin-bottom: 8px; align-items: center; }
    .schedule-line:last-child { margin-bottom: 0; }
    .schedule-direction { font-weight: 800; color: var(--primary); font-size: 16px; }
    .schedule-time { font-weight: 700; color: var(--text); }
    .schedule-date { color: var(--muted); }
    .schedule-station { flex: 1; color: var(--text); }
    .schedule-capacity { color: var(--green); font-weight: 700; }
    .empty-state { text-align: center; padding: 40px 20px; color: var(--muted); }
    .loading-text { text-align: center; padding: 20px; color: var(--muted); }

    /* === é ç´„ç­æ¬¡åˆ—è¡¨ï¼ˆä»¿å¾Œå°å¯é ç´„ç­æ¬¡æ¨£å¼ï¼‰ === */
    #bookingTimeSlots {
      padding: 0;
      background: var(--bg);
      overflow-y: auto;
      display: flex;
      flex-direction: column;
      gap: 12px;
    }
    #bookingTimeSlots .filters {
      background: var(--card);
      padding: 7px 20px;
      border-bottom: 1px solid #e7e7e7;
      display: flex;
      flex-wrap: wrap;
      gap: 16px;
      align-items: center;
      justify-content: space-between;
      position: sticky;
      top: 0;
      z-index: 5;
      border-radius: 0;
      box-shadow: var(--shadow);
    }
    #bookingTimeSlots .booking-hint {
      padding: 0 20px 8px;
      font-size: 15px;
      font-weight: 800;
      line-height: 1.6;
    }
    #bookingTimeSlots .filter-section {
      display: flex;
      flex-wrap: wrap;
      gap: 24px;
      align-items: center;
    }
    #bookingTimeSlots .filter-group {
      display: flex;
      flex-direction: column;
      gap: 6px;
    }
    #bookingTimeSlots .filter-label {
      font-size: 12px;
      font-weight: 800;
      color: var(--muted);
      text-transform: uppercase;
      letter-spacing: 0.5px;
    }
    #bookingTimeSlots .filter-select {
      appearance: none;
      padding: 8px 32px 8px 12px;
      border: 1px solid #ddd;
      border-radius: 10px;
      background: #fff url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="14" height="10" viewBox="0 0 24 24" fill="none" stroke="%23666" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="6 9 12 15 18 9"/></svg>') no-repeat right 10px center/14px;
      color: var(--text);
      font-size: 14px;
      font-weight: 700;
      cursor: pointer;
      min-width: 160px;
      min-height: 36px;
    }
    #bookingTimeSlots .filter-buttons {
      display: flex;
      gap: 8px;
      flex-wrap: wrap;
    }
    #bookingTimeSlots .filter-btn {
      padding: 6px 12px;
      border: 1px solid #ddd;
      border-radius: 10px;
      background: #fff;
      color: var(--text);
      font-size: 14px;
      font-weight: 800;
      cursor: pointer;
      transition: all 0.2s;
      min-height: 36px;
    }
    #bookingTimeSlots .filter-btn:hover {
      border-color: var(--primary);
      color: var(--primary);
      background: #f7f2ee;
    }
    #bookingTimeSlots .filter-btn.active {
      background: var(--primary);
      color: #fff;
      border-color: var(--primary);
    }
    #bookingTimeSlots .filter-btn.disabled {
      opacity: 0.5;
      cursor: not-allowed;
    }
    #bookingTimeSlots .filter-stats {
      display: flex;
      align-items: center;
      gap: 8px;
      margin-left: auto;
    }
    #bookingTimeSlots .stat-label {
      font-size: 14px;
      color: var(--muted);
      font-weight: 700;
    }
    #bookingTimeSlots .stat-value {
      font-size: 20px;
      font-weight: 800;
      color: var(--text);
    }
    #bookingTimeSlots .time-slot-table {
      flex: 1;
      overflow-y: auto;
      padding: 0 4px 12px;
    }
    #bookingTimeSlots .date-card {
      margin-bottom: 12px;
      border: 1px solid #e7e7e7;
      border-radius: 12px;
      overflow: hidden;
      background: #fff;
      box-shadow: var(--shadow);
    }
    #bookingTimeSlots .date-card:last-child {
      margin-bottom: 0;
    }
    #bookingTimeSlots .date-card-header {
      background: var(--primary);
      color: #fff;
      padding: 8px 12px;
      font-weight: 800;
      font-size: 14px;
    }
    #bookingTimeSlots .date-card-content thead {
      background: #fafafa;
    }
    #bookingTimeSlots table {
      width: 100%;
      border-collapse: collapse;
    }
    #bookingTimeSlots th {
      padding: 8px 10px;
      text-align: center;
      font-weight: 800;
      font-size: 13px;
      color: var(--text);
      border-bottom: 2px solid #e7e7e7;
      border-right: 1px solid #eee;
    }
    #bookingTimeSlots th:last-child { border-right: none; }
    #bookingTimeSlots th.time-col {
      width: 90px;
    }
    #bookingTimeSlots th.direction {
      text-align: center;
      font-size: 14px;
      background: #f6f1eb;
    }
    #bookingTimeSlots th.station {
      text-align: center;
      width: 100px;
      background: #f6f1eb;
    }
    #bookingTimeSlots td {
      padding: 8px 10px;
      border-bottom: 1px solid #eee;
      border-right: 1px solid #eee;
      font-size: 13px;
      vertical-align: middle;
      text-align: center;
      color: var(--text);
    }
    #bookingTimeSlots td:last-child { border-right: none; }
    #bookingTimeSlots td.station-cell {
      text-align: center;
      font-weight: 800;
    }
    #bookingTimeSlots .station-value {
      display: inline-block;
      padding: 6px 12px;
      border-radius: 10px;
      background: #10b981;
      color: #fff;
      min-width: 56px;
      font-size: 13px;
      font-weight: 800;
      text-align: center;
      border: none;
      cursor: pointer;
      transition: transform 0.06s ease, box-shadow 0.2s ease, filter 0.2s ease;
      box-shadow: 0 2px 6px rgba(0,0,0,0.12);
    }
    #bookingTimeSlots .station-value:active { transform: scale(0.96); }
    #bookingTimeSlots .station-value:focus-visible { outline: 2px solid #111; outline-offset: 2px; }
    #bookingTimeSlots .station-value.unavailable {
      background: #ef4444;
      color: #fff;
      cursor: not-allowed;
      min-width: 56px;
      font-size: 13px;
    }
    #bookingTimeSlots .station-value.soldout {
      background: #9e9e9e;
      color: #fff;
      cursor: not-allowed;
      min-width: 56px;
      font-size: 13px;
    }
    #bookingTimeSlots .direction-badge {
      padding: 4px 10px;
      border-radius: 999px;
      font-size: 12px;
      font-weight: 800;
      background: #f0e7dd;
      color: var(--primary);
    }
    #bookingTimeSlots .loading,
    #bookingTimeSlots .empty-state {
      text-align: center;
      padding: 40px 20px;
      color: var(--muted);
      background: #fff;
      border-radius: 12px;
      box-shadow: var(--shadow);
    }

    /* === é ç´„ç­æ¬¡åˆ—è¡¨ === */
    .booking-slots { display: flex; flex-direction: column; gap: 12px; }
    .slot-date-card { border: 1px solid #e7e7e7; border-radius: 12px; overflow: hidden; background: #fff; box-shadow: var(--shadow); }
    .slot-date-header { background: #f7f2ee; padding: 10px 14px; font-weight: 800; color: var(--primary); }
    .slot-table { width: 100%; border-collapse: collapse; }
    .slot-table th, .slot-table td { padding: 10px 12px; border-bottom: 1px solid #eee; font-size: 14px; }
    .slot-table th { background: #fafafa; text-align: left; font-weight: 800; color: #333; }
    .slot-table td.time { width: 90px; font-weight: 700; color: var(--primary); }
    .slot-table td.station { color: var(--text); }
    .slot-table td.capacity { text-align: right; }
    .slot-capacity-btn { padding: 6px 10px; border-radius: 10px; border: 1px solid var(--primary); background: #fff; color: var(--primary); font-weight: 800; cursor: pointer; }
    .slot-capacity-btn:hover { background: var(--primary); color: #fff; }
    .slot-capacity-btn.disabled { border-color: #ddd; color: #aaa; cursor: not-allowed; background: #f7f7f7; }

    /* === å¯æ”¶åˆå€å¡Š === */
    .collapsible .collapsible-header{
      display:flex; align-items:center; justify-content:space-between; cursor:pointer;
    }
    .collapsible .toggle-icon{ font-size:18px; color:#777; }
    .collapsible .collapsible-content{ display:none; margin-top:12px; }
    .collapsible.open .collapsible-content{ display:block; }
  </style>
</head>
<body>
  <!-- åˆå§‹è¼‰å…¥é®ç½© -->
  <div id="initialLoading" class="overlay show">
    <div>
      <div class="spinner"></div>
      <div style="text-align:center;color:var(--primary);font-weight:700;font-size:18px" data-i18n="loading">è³‡æ–™è®€å–ä¸­â€¦</div>
    </div>
  </div>

  <!-- è·‘é¦¬ç‡ˆ -->
  <div id="marqueeContainer" class="marquee-container" style="display:none">
    <div id="marqueeContent" class="marquee-content"></div>
    <button class="marquee-close" onclick="closeMarquee()">âœ•</button>
  </div>

  <!-- é ‚éƒ¨å°è¦½ -->
  <header class="navbar">
    <div class="brand" onclick="window.open('https://www.fortehotelxizhi.com.tw/','_blank')" style="cursor:pointer">
      <img src="/images/logo.png" alt="logo" />
      <div class="brand-title" data-i18n="brand">é£¯åº—æœå‹™</div>
    </div>

    <div class="nav-links">
      <button id="nav-reservation" class="active" onclick="showPage('reservation')" data-i18n="navReservation">ç«‹å³é ç´„</button>
      <button id="nav-check" onclick="showPage('check')" data-i18n="navCheck">æˆ‘çš„é ç´„</button>
      <button id="nav-schedule" onclick="showPage('schedule')" data-i18n="navSchedule">æŸ¥è©¢ç­æ¬¡</button>
      <button id="nav-station" onclick="showPage('station')" data-i18n="navStation">åœé ç«™é»</button>
    </div>

    <div class="nav-right">
      <div class="lang-wrap">
        <span data-i18n="languageLabel">Language</span>
        <select id="languageSelect" onchange="onLanguageChange(this.value)">
          <option value="zh" selected>ğŸ‡¹ğŸ‡¼ ä¸­æ–‡</option>
          <option value="en">ğŸ‡ºğŸ‡¸ English</option>
          <option value="ja">ğŸ‡¯ğŸ‡µ æ—¥æœ¬èª</option>
          <option value="ko">ğŸ‡°ğŸ‡· í•œêµ­ì–´</option>
        </select>
      </div>
    </div>
  </header>

  <!-- æ‰‹æ©Ÿåº•éƒ¨å°è¦½ -->
  <nav class="mobile-tabbar">
    <div class="bar">
      <button id="m-reservation" class="active" onclick="showPage('reservation')" data-i18n="navReservation">ç«‹å³é ç´„</button>
      <button id="m-check" onclick="showPage('check')" data-i18n="navCheck">æˆ‘çš„é ç´„</button>
      <button id="m-schedule" onclick="showPage('schedule')" data-i18n="navSchedule">æŸ¥è©¢ç­æ¬¡</button>
      <button id="m-station" onclick="showPage('station')" data-i18n="navStation">åœé ç«™é»</button>
    </div>
  </nav>

  <!-- å›åˆ°é ‚ç«¯ -->
  <button id="backToTop" title="Back to top" data-i18n-title="backToTopTitle" onclick="scrollToTop()">â†‘</button>

  <!-- é ç´„æµç¨‹ -->
  <main id="reservation" class="page active">
    <section id="homeHero" class="hero">
      <h1 data-i18n="heroTitle">å…è²»æ¥é§</h1>
      <div class="actions" style="margin-top:8px">
        <button class="button" onclick="startBooking()" data-i18n="bookNow">ç«‹å³é ç´„</button>
      </div>
      <div style="margin-top:16px">
        <img src="/images/æ™‚åˆ»è¡¨.png" alt="æ™‚åˆ»è¡¨" style="width:100%;max-width:820px;border-radius:14px;box-shadow:var(--shadow)"/>
      </div>

      <!-- åœ–ç‰‡å±•ç¤º -->
      <div id="imageGallery" class="image-gallery"></div>
    </section>

    <!-- Step 1ï¼šæ–¹å‘ -->
    <section id="step1" class="card wizard-fixed" style="display:none">
      <h2 data-i18n="step1Title">é¸æ“‡æ–¹å‘</h2>
      <div class="field">
        <label class="label" data-i18n="labelDirection">è«‹é¸æ“‡æ–¹å‘<span style="color:#b00020">*</span></label>
        <div id="directionList" class="options"></div>
      </div>
      <div class="hint" data-i18n="directionHint">å»ç¨‹å›ºå®šç”±é£¯åº—å‡ºç™¼ï¼Œå›ç¨‹çµ‚é»ç‚ºé£¯åº—</div>
      <div class="actions">
        <button class="button btn-ghost" onclick="restart()" data-i18n="requery">é‡æ–°æŸ¥è©¢</button>
      </div>
    </section>

    <!-- Step 2ï¼šç­æ¬¡/ç«™é» -->
    <section id="step2" class="card wizard-fixed" style="display:none">
      <div style="margin-bottom:12px">
        <img src="/images/å„ç«™é»æ©«å¹….png" class="station-info-img" alt="stations banner" />
      </div>
      <h2 id="step2TitleText" data-i18n="step2TitleOutbound">å»ç¨‹é¸æ“‡ç­æ¬¡</h2>
      <div class="booking-hint">
        <div data-i18n="boardingStationHint">1.ä¸Šè»Šç«™é»:ç¦æ³°å¤§é£¯åº— Forte Hotel</div>
        <div style="color:#b00020;font-weight:800" data-i18n="selectDropoffHint">2.è«‹é¸æ“‡ä¸‹è»Šç«™é»</div>
      </div>
      <div id="bookingTimeSlots">
        <div class="filters">
          <div class="filter-section">
            <div class="filter-group">
              <label class="filter-label" data-i18n="filterDateLabel">æ—¥æœŸ / DATE</label>
              <select class="filter-select" id="bookingSlots-dateFilter" onchange="bookingSlotsFilterByDate()">
                <option value="all" data-i18n="allDates">å…¨éƒ¨æ—¥æœŸ</option>
              </select>
            </div>
            <div class="filter-group">
              <label class="filter-label" data-i18n="filterStationLabel">ç«™é» / STATION</label>
              <div class="filter-buttons">
                <button class="filter-btn" data-filter="all" data-filter-type="station" onclick="bookingSlotsFilterByStation('all')" data-i18n="all">å…¨éƒ¨</button>
                <button class="filter-btn" data-filter="mrt" data-filter-type="station" onclick="bookingSlotsFilterByStation('mrt')" data-i18n="stationMrt">æ·é‹ç«™</button>
                <button class="filter-btn" data-filter="train" data-filter-type="station" onclick="bookingSlotsFilterByStation('train')" data-i18n="stationTrain">ç«è»Šç«™</button>
                <button class="filter-btn" data-filter="lala" data-filter-type="station" onclick="bookingSlotsFilterByStation('lala')" data-i18n="stationLala">LaLaport</button>
              </div>
            </div>
          </div>
          <div class="filter-stats">
            <span class="stat-label" data-i18n="totalSlotsLabel">ç¸½æ™‚æ®µæ•¸ï¼š</span>
            <span class="stat-value" id="bookingSlots-totalSlots">0</span>
          </div>
        </div>
        <div id="bookingSlots-tableContainer">
          <div class="loading-text" data-i18n="loading">è³‡æ–™è®€å–ä¸­â€¦</div>
        </div>
      </div>
      <div class="actions">
        <button class="button btn-ghost" onclick="goStep(1)" data-i18n="back">è¿”å›</button>
        <button class="button btn-ghost" onclick="restart()" data-i18n="requery">é‡æ–°æŸ¥è©¢</button>
      </div>
    </section>

    <!-- Step 5+6ï¼šç¢ºèªèˆ‡é€å‡ºï¼ˆåˆä½µï¼‰ -->
    <section id="step6" class="card wizard-fixed" style="display:none">
      <h2 data-i18n="step6Title">ç¢ºèªç­æ¬¡è³‡è¨Š</h2>
      <div class="grid">
        <div class="field"><label class="label" data-i18n="labelDirection">æ–¹å‘</label><input id="cf_direction" class="readonly" readonly/></div>
        <div class="field"><label class="label" data-i18n="labelDate">æ—¥æœŸ</label><input id="cf_date" class="readonly" readonly/></div>
        <div class="field"><label class="label" data-i18n="labelPick">ä¸Šè»Šç«™é»</label><input id="cf_pick" class="readonly" readonly/></div>
        <div class="field"><label class="label" data-i18n="labelDrop">ä¸‹è»Šç«™é»</label><input id="cf_drop" class="readonly" readonly/></div>
        <div class="field"><label class="label" data-i18n="labelScheduleOnly">ç­æ¬¡</label><input id="cf_time" class="readonly" readonly/></div>
      </div>
      <div style="height:12px"></div>
      <div class="field">
        <label class="label" data-i18n="labelIdentity">è«‹é¸æ“‡æ‚¨çš„èº«åˆ†<span style="color:#b00020">*</span></label>
        <select id="identitySelect" class="select" onchange="onIdentityChange()">
          <option value="hotel" selected data-i18n="idHotel">ä½å®¿è²´è³“</option>
          <option value="dining" data-i18n="idDining">ç”¨é¤è²´è³“</option>
        </select>
        <div id="identityErr" class="error" data-i18n="errIdentity">è«‹é¸æ“‡æ‚¨çš„èº«åˆ†</div>
      </div>

      <div id="hotelDates" class="field" style="display:none">
        <label class="label" data-i18n="labelCheckIn">å…¥ä½æ—¥æœŸ<span style="color:#b00020">*</span></label>
        <input id="checkInDate" type="date" class="input" />
      </div>
      <div id="hotelDates2" class="field" style="display:none">
        <label class="label" data-i18n="labelCheckOut">é€€æˆ¿æ—¥æœŸ<span style="color:#b00020">*</span></label>
        <input id="checkOutDate" type="date" class="input" />
      </div>

      <div id="diningDateDiv" class="field" style="display:none">
        <label class="label" data-i18n="labelDiningDate">ç”¨é¤æ—¥æœŸ<span style="color:#b00020">*</span></label>
        <input id="diningDate" type="date" class="input" />
      </div>

      <div id="roomNumberDiv" class="field" style="display:none">
        <label class="label" data-i18n="labelRoom">æˆ¿è™Ÿ<span style="color:#b00020">*</span></label>
        <input id="roomNumber" type="text" class="input" placeholder="" oninput="validateRoom(this)" />
        <div id="roomErr" class="error" data-i18n="errRoom">è«‹å¡«å¯«æ­£ç¢ºçš„æˆ¿è™Ÿ</div>
        <div class="hint" data-i18n="roomHint">å°šæœª CHECK IN è«‹è¼¸å…¥0000</div>
      </div>

      <div class="field">
        <label class="label" data-i18n="labelName">è²´è³“å§“å<span style="color:#b00020">*</span></label>
        <input id="guestName" type="text" class="input" oninput="validateName(this)" onblur="validateNameOnBlur(this)" />
        <div id="nameErr" class="error" data-i18n="errName">é™å¡«ä¸­æ–‡æˆ–è‹±æ–‡å§“å</div>
      </div>
      <div class="field">
        <label class="label" data-i18n="labelPhone">æ‰‹æ©Ÿ<span style="color:#b00020">*</span></label>
        <input id="guestPhone" type="tel" class="input" placeholder="+886921234567" oninput="validatePhone(this)" />
        <div id="phoneErr" class="error" data-i18n="errPhone">è«‹è¼¸å…¥æ­£ç¢ºçš„æ‰‹æ©Ÿè™Ÿç¢¼</div>
        <div class="hint" data-i18n="phoneHint">è«‹è¼¸å…¥æ­£ç¢ºçš„æ‰‹æ©Ÿè™Ÿç¢¼ï¼ˆå¯å¡«å¯«éå°ç£æ‰‹æ©Ÿè™Ÿç¢¼ï¼‰</div>
      </div>
      <div class="field">
        <label class="label" data-i18n="labelEmail">ä¿¡ç®±<span style="color:#b00020">*</span></label>
        <input id="guestEmail" type="email" class="input" placeholder="name@example.com" oninput="validateEmail(this)" onblur="validateEmailOnBlur(this)" />
        <div id="emailErr" class="error" data-i18n="errEmail">è«‹å¡«å¯«æ­£ç¢ºçš„éƒµç®±</div>
      </div>
      <div class="field">
        <label class="label" data-i18n="labelPassengers">é ç´„äººæ•¸ï¼ˆè«‹é¸æ“‡ï¼‰<span style="color:#b00020">*</span></label>
        <select id="passengers" class="select"></select>
        <div id="passengersHint" class="hint"></div>
        <div id="passengersErr" class="error" data-i18n="errPassengers">è«‹é¸æ“‡æ­£ç¢ºçš„äººæ•¸ï¼ˆä¸å¯è¶…éå¯é ç´„äººæ•¸æˆ–4äººï¼‰</div>
      </div>
      <div class="actions row">
        <button class="button btn-ghost" onclick="goStep(2)" data-i18n="back">è¿”å›</button>
        <button class="button" onclick="submitBooking()" data-i18n="submit">æäº¤é ç´„</button>
      </div>
    </section>

    <!-- æˆåŠŸå¡ç‰‡ -->
    <section id="successCard" class="card wizard-fixed" style="display:none">
      <div id="ticketCard" class="ticket-card">
        <div style="display:flex;align-items:center;justify-content:space-between;margin-bottom:16px;">
          <div style="display:flex;align-items:center;gap:8px;">
            <div class="status-pill status-booked" id="successStatusPill" style="position:relative;left:0;top:0;">âœ”ï¸ å·²é ç´„</div>
          </div>
          <button class="ticket-close" onclick="closeTicketToHome()" aria-label="close" data-i18n-aria-label="closeLabel" style="position:relative;right:0;top:0;">âœ•</button>
        </div>
        <div class="ticket-header">
          <h2 id="ticketHeaderTitle" data-i18n="ticketTitle">æ¥é§è»Šç¥¨</h2>
        </div>
        <div class="ticket-content">
          <div class="ticket-qr"><img id="ticketQrImg" src="" alt="QR Code"/></div>
          <div class="ticket-info">
            <div class="ticket-field"><span class="ticket-label" data-i18n="labelBookingId">é ç´„ç·¨è™Ÿ</span><span class="ticket-value" id="ticketBookingId"></span></div>
            <div class="ticket-field"><span class="ticket-label" data-i18n="labelDirection">æ–¹å‘</span><span class="ticket-value" id="ticketDirection"></span></div>
            <div class="ticket-field"><span class="ticket-label" data-i18n="labelPick">ä¸Šè»Šåœ°é»</span><span class="ticket-value" id="ticketPick"></span></div>
            <div class="ticket-field"><span class="ticket-label" data-i18n="labelDrop">ä¸‹è»Šåœ°é»</span><span class="ticket-value" id="ticketDrop"></span></div>
            <div class="ticket-field"><span class="ticket-label" data-i18n="labelName">å§“å</span><span class="ticket-value" id="ticketName"></span></div>
            <div class="ticket-field"><span class="ticket-label" data-i18n="labelPhone">æ‰‹æ©Ÿ</span><span class="ticket-value" id="ticketPhone"></span></div>
            <div class="ticket-field"><span class="ticket-label" data-i18n="labelEmail">ä¿¡ç®±</span><span class="ticket-value" id="ticketEmail"></span></div>
            <div class="ticket-field"><span class="ticket-label" data-i18n="labelPassengersShort">äººæ•¸</span><span class="ticket-value" id="ticketPassengers"></span></div>
          </div>
        </div>
        <div class="ticket-actions">
          <button class="button" onclick="downloadTicket()" data-i18n="download">ä¸‹è¼‰è»Šç¥¨</button>
        </div>
      </div>
    </section>
  </main>

  <!-- æˆ‘çš„é ç´„ -->
  <main id="check" class="page">
    <div class="card wizard-fixed">
      <h2 data-i18n="queryTitle">æŸ¥è©¢è¨‚å–®(å·²é ç´„/å–æ¶ˆ/ä¿®æ”¹)</h2>
      <div class="card" style="margin:0 0 12px;background:#fff7ea">
        <div style="font-size:14px;color:#6b4b22;line-height:1.6">
          <span data-i18n="notice1">â€» é ˆæ–¼ç™¼è»Šå‰ä¸€å°æ™‚å®Œæˆã€é ç´„ï¼åˆªæ”¹ã€‘ï¼Œåº§ä½æœ‰é™ï¼Œç´„æ»¿ç‚ºæ­¢ã€‚</span><br/>
          <span data-i18n="notice2">â€» æˆ¿å®¢ã€ç”¨é¤å®¢äººå¯äº«å…è²»é ç´„æ­ä¹˜ã€‚</span>
        </div>
      </div>

      <div id="queryForm" class="query-form">
        <div class="field"><label class="label" data-i18n="queryBookingId">é ç´„ç·¨è™Ÿ</label><input id="qBookId" class="input" placeholder="1109001"/></div>
        <div class="field"><label class="label" data-i18n="queryPhone">é ç´„é›»è©±</label><input id="qPhone" class="input" placeholder="+8869..."/></div>
        <div class="field"><label class="label" data-i18n="queryEmail">é ç´„ä¿¡ç®±</label><input id="qEmail" class="input" placeholder="name@example.com"/></div>
        <div class="field" style="display:flex;align-items:flex-end;gap:8px">
          <button class="button" onclick="queryOrders()" data-i18n="queryBtn">æŸ¥è©¢</button>
          <button class="button btn-ghost" onclick="resetQuery()" data-i18n="clearBtn">æ¸…é™¤</button>
        </div>
      </div>
      <div id="queryHint" style="margin-top:6px;font-weight:800;color:#b00020" data-i18n="queryHint">*è«‹æ“‡ä¸€è¼¸å…¥</div>
    </div>

    <!-- æŸ¥è©¢å¾Œï¼šæ—¥æœŸé¸æ“‡é  -->
    <div id="checkDateStep" class="card wizard-fixed check-date-card" style="display:none">
      <h2 data-i18n="selectDateTitle">é¸æ“‡æ—¥æœŸ</h2>
      <div id="dateChoices" class="options"></div>
      <div class="actions" style="margin-top:12px">
        <button class="button btn-ghost" onclick="showCheckQueryForm()" data-i18n="backToQuery">è¿”å›æŸ¥è©¢</button>
      </div>
    </div>

    <!-- æŸ¥è©¢å¾Œï¼šç¥¨å¡é  -->
    <div id="checkTicketStep" class="card wizard-fixed ticket-page" style="display:none">
      <div style="position:relative">
        <button class="ticket-close" onclick="closeCheckTicket()" aria-label="close" data-i18n-aria-label="closeLabel">âœ•</button>
        <div class="ticket-header">
          <h2 data-i18n="ticketTitle">æ¥é§è»Šç¥¨</h2>
        </div>
      </div>
      <div id="checkTicketMount"></div>
    </div>
  </main>

  <!-- æŸ¥è©¢ç­æ¬¡ -->
  <main id="schedule" class="page">
    <section class="card wizard-fixed">
      <h2 data-i18n="scheduleTitle">æŸ¥è©¢å¯é ç´„ç­æ¬¡</h2>

      <!-- å–®ä¸€ ALL æ¸…é™¤éˆ• -->
      <div class="filter-group">
        <div id="allFilter" class="filter-pills"></div>
      </div>

      <!-- ç¯©é¸æ§ä»¶ -->
      <div class="filter-controls">
        <div class="filter-group">
          <label class="label" data-i18n="labelDirection">æ–¹å‘</label>
          <div id="directionFilter" class="filter-pills"></div>
        </div>

        <div class="filter-group">
          <label class="label" data-i18n="labelDate">æ—¥æœŸ</label>
          <div id="dateFilter" class="filter-pills"></div>
        </div>

        <div class="filter-group">
          <label class="label" data-i18n="labelStation">ç«™é»</label>
          <div id="stationFilter" class="filter-pills"></div>
        </div>
      </div>

      <!-- çµæœå±•ç¤º -->
      <div id="scheduleResults" class="schedule-results">
        <div class="loading-text" data-i18n="loading">è³‡æ–™è®€å–ä¸­â€¦</div>
      </div>
    </section>
  </main>

  <!-- åœé ç«™é» -->
  <main id="station" class="page station-page">
    <!-- âœ… å¤–é¢åŒ…ä¸€å±¤ wizard-fixedï¼Œçµ±ä¸€å¯¬åº¦ -->
    <div class="wizard-fixed">
      <div class="grid">
        <!-- ç¬¬ä¸€å€ï¼šæ¥é§è»Šè³‡è¨Šï¼ˆä¸æ”¶åˆï¼‰ -->
        <section class="card">
          <h2 class="station-title" style="text-align:center" data-i18n="stopsInfoTitle">
            æ¥é§è»Šè³‡è¨Š
          </h2>
          <div class="station-info" data-i18n-html="stopsInfoText">
            <p><strong>â€»æˆ¿å®¢ã€ç”¨é¤å®¢äººå¯äº«å…è²»é ç´„æ¥é§ï¼Œéæˆ¿å®¢æˆ–ç”¨é¤å®¢äººé ç´„æ¥é§é ˆæ”¶è²»æ¯ä½NT$200/å–®è¶Ÿï¼Œæ¯è¶Ÿæ¬¡å¯æ­ä¹˜19åæ—…å®¢ï¼Œåº§ä½æœ‰é™ï¼Œç´„æ»¿ç‚ºæ­¢ã€‚</strong></p>
            <p><strong>â€»æœ¬é£¯åº—ä¿æœ‰å½ˆæ€§èª¿æ•´ç™¼è»Šæ™‚æ®µï¼Œç™¼è»Šèˆ‡å¦åŠè»Šè¼›å‹å¼ä¹‹æ¬Šåˆ©ã€‚è»Šç¨®ä»‹ç´¹ï¼šä¾é ç´„äººæ•¸å®‰æ’ç™½è‰²20äººä¸­å·´(è»Šç‰ŒPAB-311)æˆ–éµç°è‰²ç¦æ–¯ä¹äººåº§(è»Šç‰ŒBLD-0361)</strong></p>
          </div>

          <!-- é€™è£¡æ”¾ä¸€å¼µæ©«å‘é•·æ–¹å½¢åœ–ç‰‡ï¼šæª”åå¯è‡ªè¡Œæ›¿æ› -->
          <div class="station-info-image-wrap">
            <img src="/images/è»Šç¨®1.png"
                 alt="æ¥é§è»Šè³‡è¨Šç¤ºæ„åœ–"
                 class="station-info-img" />
          </div>
        </section>

        <!-- ç¬¬äºŒå€ï¼šç¦æ³°å¤§é£¯åº—ç™¼è»Šï¼ˆå¯æ”¶åˆï¼Œé è¨­æ”¶èµ·ï¼‰ -->
        <section class="card collapsible" id="stopHotel">
          <div class="collapsible-header" onclick="toggleCollapse('stopHotel')">
            <h2 data-i18n="stopHotelTitle">
              ç¦æ³°å¤§é£¯åº—ç™¼è»Š-å´é–€å‡ºå£ / Forte Hotel Xizhi Departure - Side Entrance
            </h2>
            <span class="toggle-icon">â–¸</span>
          </div>
          <div class="collapsible-content">
            <img src="/images/é£¯åº—1.jpg" class="station-img" alt="é£¯åº—ç™¼è»Šé»"/>
            <div style="margin-top:12px">
              <iframe src="https://www.google.com/maps/embed?pb=!1m13!1m8!1m3!1d903.5965295503805!2d121.631097!3d25.054899!3m2!1i1024!2i768!4f13.1!3m2!1m1!2zMjXCsDAzJzE3LjQiTiAxMjHCsDM3JzUyLjEiRQ!5e0!3m2!1szh-TW!2sus!4v1762533754549!5m2!1szh-TW!2us"
                      width="100%" height="380"
                      style="border:0;border-radius:12px"
                      loading="lazy"
                      referrerpolicy="no-referrer-when-downgrade"
                      allowfullscreen></iframe>
            </div>
          </div>
        </section>

        <!-- ç¬¬ä¸‰å€ï¼šå—æ¸¯å±•è¦½é¤¨ï¼ˆå¯æ”¶åˆï¼Œé è¨­æ”¶èµ·ï¼‰ -->
        <section class="card collapsible" id="stopMRT">
          <div class="collapsible-header" onclick="toggleCollapse('stopMRT')">
            <h2 data-i18n="stopMRTTitle">
              å—æ¸¯å±•è¦½é¤¨æ·é‹ç«™ / Nangang Exhibition Center - MRT Exit 3
            </h2>
            <span class="toggle-icon">â–¸</span>
          </div>
          <div class="collapsible-content">
            <div class="station-desc">
              <div data-i18n="stopMRTDesc">
                æ·é‹å—æ¸¯å±•è¦½é¤¨ 3 è™Ÿå‡ºå£ - æ±½æ©Ÿè»Šè‡¨åœæ¥é€å€ã€‚
              </div>
              <div data-i18n="stopMRTDesc2">
                åœé æ™‚é–“ï¼š08:35 / 10:05 / 12:05 / 14:35 / 17:05 / 18:35 / 21:05
              </div>
            </div>
            <img src="/images/æ·é‹1.png" class="station-img" alt="æ·é‹3è™Ÿå‡ºå£"/>
            <div style="margin-top:12px">
              <iframe src="https://www.google.com/maps/embed?pb=!1m13!1m8!1m3!1d903.5957185825895!2d121.61843600000002!3d25.055009!3m2!1i1024!2i768!4f13.1!3m2!1m1!2zMjXCsDAzJzE4LjEiTiAxMjHCsDM3JzA1LjUiRQ!5e0!3m2!1szh-TW!2us!4v1762600714030!5m2!1szh-TW!2us"
                      width="100%" height="380"
                      style="border:0;border-radius:12px"
                      loading="lazy"
                      referrerpolicy="no-referrer-when-downgrade"
                      allowfullscreen></iframe>
            </div>
          </div>
        </section>

        <!-- ç¬¬å››å€ï¼šå—æ¸¯ç«è»Šç«™ï¼ˆå¯æ”¶åˆï¼Œé è¨­æ”¶èµ·ï¼‰ -->
        <section class="card collapsible" id="stopTrain">
          <div class="collapsible-header" onclick="toggleCollapse('stopTrain')">
            <h2 data-i18n="stopTrainTitle">
              å—æ¸¯ç«è»Šç«™ / Nangang Train Station
            </h2>
            <span class="toggle-icon">â–¸</span>
          </div>
          <div class="collapsible-content">
            <div class="station-desc">
              <div data-i18n="stopTrainDesc">
                å—æ¸¯ç«è»Šç«™é èˆˆä¸­è·¯ä¸€å´ä¸Šä¸‹å®¢é»ï¼ˆå—æ¸¯è»Šç«™æ±å´è‡¨åœæ¥é€å€ï¼‰ã€‚
              </div>
              <div data-i18n="stopTrainDesc2">
                åœé æ™‚é–“ï¼š08:40 / 10:10 / 12:10 / 14:40 / 17:10 / 18:40 / 21:10
              </div>
            </div>
            <img src="/images/ç«è»Šç«™1.png" class="station-img" alt="å—æ¸¯ç«è»Šç«™1"/>
            <img src="/images/ç«è»Šç«™2.png" class="station-img" alt="å—æ¸¯ç«è»Šç«™2"/>
            <div style="margin-top:12px">
              <iframe src="https://www.google.com/maps/embed?pb=!1m13!1m8!1m3!1d903.6109052447401!2d121.60801199999999!3d25.052949!3m2!1i1024!2i768!4f13.1!3m2!1m1!2zMjXCsDAzJzEwLjMiTiAxMjHCsDM2JzI4LjAiRQ!5e0!3m2!1szh-TW!2us!4v1762600699115!5m2!1szh-TW!2us"
                      width="100%" height="380"
                      style="border:0;border-radius:12px"
                      loading="lazy"
                      referrerpolicy="no-referrer-when-downgrade"
                      allowfullscreen></iframe>
            </div>
          </div>
        </section>

        <!-- ç¬¬äº”å€ï¼šLaLaportï¼ˆå¯æ”¶åˆï¼Œé è¨­æ”¶èµ·ï¼‰ -->
        <section class="card collapsible" id="stopLala">
          <div class="collapsible-header" onclick="toggleCollapse('stopLala')">
            <h2 data-i18n="stopLalaTitle">
              å—æ¸¯ LaLaport Shopping Park
            </h2>
            <span class="toggle-icon">â–¸</span>
          </div>
          <div class="collapsible-content">
            <div class="station-desc">
              <div data-i18n="stopLalaDesc">
                å—æ¸¯å±•è¦½é¤¨ 1 è™Ÿå‡ºå£å¤§å®¢è»Šè‡¨åœå€ / å°å®¢è»Šè‡¨åœå€ï¼ˆè¦–è»Šç¨®æœ‰ä¸åŒåœé å€ï¼‰ã€‚
              </div>
              <div data-i18n="stopLalaDesc2">
                åœé æ™‚é–“ï¼š12:15 / 14:45 / 17:20 / 18:50 / 21:15
              </div>
            </div>
            <img src="/images/lala1.png" class="station-img" alt="LaLaport1"/>
            <img src="/images/lala2.png" class="station-img" alt="LaLaport2"/>
            <div style="margin-top:12px">
              <iframe src="https://www.google.com/maps/embed?pb=!1m13!1m8!1m3!1d903.5851167154738!2d121.617376!3d25.056447!3m2!1i1024!2i768!4f13.1!3m2!1m1!2zMjXCsDAzJzIyLjciTiAxMjHCsDM3JzAxLjQiRQ!5e0!3m2!1szh-TW!2us!4v1762600680118!5m2!1szh-TW!2us"
                      width="100%" height="380"
                      style="border:0;border-radius:12px"
                      loading="lazy"
                      referrerpolicy="no-referrer-when-downgrade"
                      allowfullscreen></iframe>
            </div>
          </div>
        </section>

        <!-- æŸ¥è©¢ç­æ¬¡ - å³æ™‚ä½ç½®ï¼ˆå¯æ”¶åˆï¼Œé è¨­æ‰“é–‹ï¼‰ -->
        <section id="realtimeSection" class="card collapsible" data-feature="liveLocation" style="display:none">
          <div class="collapsible-header" onclick="toggleCollapse('realtimeSection')">
            <h2 data-i18n="realtimeTitle">å³æ™‚ä½ç½®</h2>
            <span class="toggle-icon">â–¾</span>
          </div>
          <div class="collapsible-content" style="display:block;">
            <div id="realtimeMount" class="realtime-box" aria-live="polite"></div>
          </div>
        </section>
      </div>
    </div>
  </main>


  <!-- åº•éƒ¨ -->
  <footer class="footer">
    Â© 2025. Forte Hotel XiZhiæ±æ­¢ç¦æ³°å¤§é£¯åº—. <a href="https://kz-tech.netlify.app/" target="_blank">Design</a>
  </footer>

  <!-- Loading / Overlay -->
  <div id="loading" class="overlay">
    <div>
      <div class="spinner"></div>
      <div style="text-align:center;color:var(--primary);font-weight:700" data-i18n="loading">è³‡æ–™è®€å–ä¸­â€¦</div>
    </div>
  </div>
  <div id="loadingConfirm" class="overlay">
    <div>
      <div class="spinner"></div>
      <div style="text-align:center;color:var(--primary);font-weight:700" data-i18n="verifying">è³‡æ–™ç¢ºèªä¸­â€¦</div>
    </div>
  </div>
  <div id="expiredOverlay" class="overlay">
    <div class="overlay-card">
      <h3 data-i18n="expiredTitle">ç­æ¬¡å·²éæœŸæˆ–ç›®å‰ä¸å¯é ç´„</h3>
      <p data-i18n="expiredText">è«‹é‡æ–°æŸ¥è©¢å¯é ç´„ç­æ¬¡</p>
      <div class="actions" style="margin-top:8px">
        <button id="overlayBackBtn" class="button" onclick="overlayRestart()" data-i18n="requery">é‡æ–°æŸ¥è©¢</button>
      </div>
    </div>
  </div>

  <!-- é€šç”¨å°è©±æ¡†ï¼ˆéŒ¯èª¤/ç¢ºèªï¼‰ -->
  <div id="dialogOverlay" class="overlay">
    <div class="overlay-card" role="dialog" aria-modal="true" aria-labelledby="dialogTitle">
      <h3 id="dialogTitle">è¨Šæ¯</h3>
      <div id="dialogContent" class="dialog-content"></div>
      <div class="dialog-actions">
        <button id="dialogCancelBtn" class="button btn-ghost" style="display:none"></button>
        <button id="dialogConfirmBtn" class="button"></button>
      </div>
    </div>
  </div>

  <!-- æˆåŠŸå‹•ç•« -->
  <div id="successAnimation" class="success-animation" aria-live="polite">
    <svg class="checkmark" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 52 52">
      <circle class="checkmark__circle" cx="26" cy="26" r="25" fill="none"/>
      <path class="checkmark__check" fill="none" d="M14.1 27.2l7.1 7.2 16.7-16.8"/>
    </svg>
    <div id="successText" style="font-size: 24px; font-weight: 700; color: #4CAF50;" data-i18n="successText">å·²å®Œæˆ</div>
  </div>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/dom-to-image/2.6.0/dom-to-image.min.js"></script>
  <script src="./i18n.js"></script>
  <script src="./app.js"></script>
</body>
</html>
